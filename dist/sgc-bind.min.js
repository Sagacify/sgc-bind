define("utils",[],function(){var t={};return t.startsWith=function(t,i){return t.slice(0,i.length)===i},t.endsWith=function(t,i){return t.slice(t.length-i.length,t.length)===i},t}),define("mixins/ModelBindMixin",["../utils"],function(utils){var Binder=function(t,i,n){this.node=i,this.model=t,this.controller=n,this.parseNodeAttribute(),this.configureBindFunction(),this.bind(),this.tryTriggerFirstValue()};return _.extend(Binder.prototype,{retrieveNodeData:function(){return $(this.node).attr("data-sgbind-"+this.controller.cid)},setNodeData:function(t){$(this.node).attr("data-sgbind-"+this.controller.cid,t)},parseNodeAttribute:function(){var t=this.retrieveNodeData(),i=t.split("->");if(this.trigger=null,this.viewAction=null,this.attribute=null,this.trigger=i[0],!this.trigger)throw"Error with node "+this.node;utils.startsWith(this.trigger,":")&&(this.trigger="change"+this.trigger),utils.startsWith(this.trigger,"change:")&&(this.attribute=this.trigger.split("change:")[1]),this.viewAction=i.length>=2?i[1]:this.attribute&&this.attribute+"ToEl"in this.controller?this.attribute+"ToEl":"$.html(value)",$(this.node).removeAttr("data-sgbind-"+this.controller.cid)},isJqueryEvalAction:function(){return utils.startsWith(this.viewAction,"$")},configureBindFunction:function(){this._bindFunction=function(model,value,options){if(this.isJqueryEvalAction()){var stringToApply="this.node"+this.viewAction.substring(1);try{eval(stringToApply)}catch(err){throw console.log(err),"Bad formated action "+this.viewAction}}else{if(!(this.viewAction in this.controller))throw"Unknow thing to do with event "+this.getIdentifier()+" - "+this.node;var e={model:this.model,value:Array.apply(null,arguments),options:options};this.attribute&&(e.value=value),this.controller[this.viewAction](e,this.node,this)}}},unBind:function(){this.model.off(this.trigger,this._bindFunction,this),this.controller=null,this.node=null,this.model=null},bind:function(){this.model.on(this.trigger,this._bindFunction,this)},mergeWith:function(t){this.node=$(this.node.get().concat(t.node.get()))},getIdentifier:function(){return this.trigger+"-"+this.viewAction+"-"+this.model.id},tryTriggerFirstValue:function(){if(this.attribute){var t=this.model.get(this.attribute,{lazyCreation:!1});this._bindFunction.apply(this,[this.model,t])}}}),{modelBind:!1,__createAllBinders:function(){if(this.modelBind){if(this._putUids("sgbind"),!this.model)throw new Error("unknow model");this.__getModelBinds();var t=this;$("[data-sgbind-"+this.cid+"]",this.el).each(function(){var i=$(this).attr("data-sgbind-"+t.cid);if(utils.startsWith(i,"[")){var n=i.split("],[");n[0]=n.first().slice(1),n[n.length-1]=n.last().slice(0,-1);var e=this;n.forEach(function(i){var n=$(e).attr("data-sgbind-"+t.cid,i);t.__addBind(new Binder(t.model,n,t))})}else t.__addBind(new Binder(t.model,$(this),t))})}},__destroyAllBinder:function(){this.modelBind&&(_.each(this.__getModelBinds(),function(t){t.unBind()},this),this.__binds={})},__addBind:function(t){var i=this.__getModelBind(t.getIdentifier());this.__getModelBind(t.getIdentifier())?i.mergeWith(t):this.__getModelBinds()[t.getIdentifier()]=t},__removeBinds:function(){_.each(this.__binds,function(t){t.destroy(),delete this.__binds[name]},this),this.__binds={}},__getModelBind:function(t){return this.__getModelBinds()[t]},__getModelBinds:function(){return this.__binds||(this.__binds={}),this.__binds}}}),define("mixins/ActionsBindMixin",[],function(){return{actionsBind:!1,__defaultSGAction:"click",__bindActions:function(){if(this.actionsBind){this._putUids("sgaction");var t=this;$("[data-sgaction-"+this.cid+"]",this.el).each(function(){var i=$(this).attr("data-sgaction-"+t.cid),n=i&&i.split(":");if(!n||!n.length)throw"Error for data-sgaction for the widget ";var e,s;1===n.length?(e=n[0],s=t.__defaultSGAction):(e=n[1],s=n[0]),t.__bindAction(this,s,e)})}},__bindAction:function(t,i,n){if(!n in this||!_.isFunction(this[n]))throw new Error("Define method for action:"+n);var e=this;$(t).on(i,function(i){e[n](i,t)});var s=this.__getActionNodes()[n+"-"+i];s&&s.trigger===i?this.__getActionNodes()[n+"-"+i].node=$(s.node.get().concat([t])):this.__getActionNodes()[n+"-"+i]={node:$(t),trigger:i}},__unbindActions:function(){this.actionsBind&&(_.each(this.__getActionNodes(),function(t){t.node.off(t.trigger)},this),this.__actionNodes={})},__getActionNodes:function(){return this.__actionNodes||(this.__actionNodes={}),this.__actionNodes}}}),define("mixins/OutletBindMixin",[],function(){return{outletsBind:!1,bindOutlets:function(){if(this.outletsBind){var t=this;this._putUids("sgoutlet"),$("[data-sgoutlet-"+this.cid+"]",this.el).each(function(){var i=$(this).attr("data-sgoutlet-"+t.cid);t.bindOutlet(this,i)})}},bindOutlet:function(t,i){return this.getOutlets()[i]?void(this.getOutlets()[i]=$(this.getOutlets()[i].get().concat([t]))):void(this.getOutlets()[i]=$(t))},getOutlets:function(){return this.outlets||(this.outlets={}),this.outlets},__clearOutlets:function(){this.outlets={}}}}),define("sgc-bind",["./mixins/ModelBindMixin","./mixins/ActionsBindMixin","./mixins/OutletBindMixin"],function(t,i,n){var e=require("backbone").Marionette,s=e.View.prototype.bindUIElements,o=e.View.prototype.unbindUIElements;e.View.prototype.bindUIElements=function(){return this.__createAllBinders(),this.bindOutlets(),this.__bindActions(),this.__createAllBinders(),s.apply(this,arguments)},e.View.prototype.unbindUIElements=function(){return this.__destroyAllBinder(),this.__unbindActions(),this.__clearOutlets(),o.apply(this,arguments)},e.View.prototype._putUids=function(t){var i=this;$("[data-"+t+"]",this.el).each(function(){var n=$(this);n.attr("data-"+t+"-"+i.cid,n.data()[t]),n.removeAttr("data-"+t)})},_.extend(e.View.prototype,t,i,n)});